경계
===

시스템에 들어가는 모든 소프트웨어를 직접 개발하는 경우는 드물다.

직접 개발한 코드와 외부 코드의 경계를 깔끔하게 처리해야 한다.

### 외부 코드 사용하기

패키지 제공자나 프레임워크 제공자는 적용성을 넓히려 한다. 사용자는 자신의 요구에 집중하는 인터페이스를 바란다.

이런 긴장으로 인해 시스템 경계에서 문제가 생길 소지가 많다.

대처 방법 => 경계 인터페이스를 이용할 때는 이를 이용하는 클래스나 클래스 계열 밖으로 노출되지 않도록 주의한다.

ex) 경계 인터페이스(여기선 Map)을 이용하는 클래스(Sensors)에서만 이용하도록.. <br>
~~~java
public class Sensors {
	private Map sensors =new HashMap();

	public Sensor getById(String id) {
		return (Sensor) sensors.get(id);
	}

	...
}
~~~

<br>

### 경계 살피고 익히기

외부 코드를 사용하면 적은 시간에 더 많은 기능을 출시하기 쉬워진다.

외부 코드를 사용하려는데 사용법이 분명하지 않다면 **학습 테스트**를 통해 익히는 것이 좋다.

외부 코드의 사용법이 분명하지 않을 때 내부 코드와 외부 코드가 섞여 있는 상태에서 버그라도 발견된다면 찾는데 복잡할 것이다.

> 학습 테스트 : 자신이 만들지 않은 코드에 대해 테스트하는 것을 말함. 

<br>

### 학습 테스트는 공짜 이상이다

학습 테스트를 이용하면 필요한 지식만 확보할 수 있다.

패키지 새 버전이 나온다면 학습 테스트를 돌려 차이가 있는지 확인하자.

경계 테스트가 있다면 패키지의 새 버전으로 이전하기 쉬워진다.

<br>

### 아직 존재하지 않는 코드를 사용하기

코드의 경계를 내부 코드와 외부 코드로 나눌 수 있지만, 아는 코드와 모르는 코드로도 나눌 수 있다.

모르는 코드 부분부터 먼 곳부터 구현하고, 경계 부분은 인터페이스를 구현해서 사용할 수 있다.

<br>

### 깨끗한 경계

소프트웨어의 경계에서는 많은 일이 벌어진다. 변경이 대표적인 예다.

소프트웨어 설계가 우수하다면 변경하는데 많은 투자와 재작업이 필요하지 않다.

경계에 위치하는 코드는 깔끔히 분리한다. 또한 기대치를 정의하는 테스트 케이스도 작성한다.

외부 패키지를 호출하는 코드를 가능한 줄여 경계를 관리하자.

<br>